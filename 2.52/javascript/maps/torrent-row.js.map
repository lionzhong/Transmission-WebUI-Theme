{"version":3,"sources":["torrent-row.js"],"names":["TorrentRendererHelper","TorrentRendererFull","TorrentRendererCompact","TorrentRow","view","controller","torrent","this","initialize","getProgressInfo","t","pct","extra","s","getStatus","seed_ratio_limit","seedRatioLimit","needsMetaData","getMetadataPercentComplete","isDone","isSeeding","Math","round","getUploadRatio","getPercentDone","Torrent","_StatusStopped","_StatusDownloadWait","_StatusDownload","_StatusSeedWait","_StatusSeed","percent","complete","join","incomplete","createProgressbar","classes","progressbar","document","createElement","className","appendChild","element","renderProgressbar","e","style","width","display","info","$","css","formatUL","Transmission","fmt","speedBps","getUploadSpeed","formatDL","getDownloadSpeed","prototype","createRow","root","name","peers","details","image","button","_name_container","_peer_details_container","_progress_details_container","_progressbar","_pause_resume_button_image","_toggle_running_button","getPeerDetails","err","getErrorMessage","isDownloading","getPeersSendingToUs","getPeersConnected","getPeersGettingFromUs","isChecking","percentString","getRecheckProgress","getStateString","getProgressDetails","c","sizeWhenDone","getSizeWhenDone","totalSize","getTotalSize","is_done","size","getPercentDoneStr","push","getUploadedEver","ratioString","getLeftUntilDone","isStopped","eta","getETA","timeInterval","render","setTextContent","getName","has_error","getError","_ErrNone","toggleClass","is_stopped","alt","_details_container","have_dn","have_up","row","_view","_torrent","_element","bind","getElement","tor","getTorrent","isSelected","indexOf","setSelected","flag","getToggleRunningButton","getTorrentId","getId"],"mappings":"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","file":"torrent-row.js","sourcesContent":["/**\n * Copyright © Mnemosyne LLC\n *\n * This file is licensed under the GPLv2.\n * http://www.gnu.org/licenses/old-licenses/gpl-2.0.html\n */\n\nfunction TorrentRendererHelper()\n{\n}\n\nTorrentRendererHelper.getProgressInfo = function(controller, t)\n{\n\tvar pct, extra,\n\t    s = t.getStatus(),\n\t    seed_ratio_limit = t.seedRatioLimit(controller);\n\n\tif (t.needsMetaData())\n\t\tpct = t.getMetadataPercentComplete() * 100;\n\telse if (!t.isDone())\n\t\tpct = Math.round(t.getPercentDone() * 100);\n\telse if (seed_ratio_limit > 0 && t.isSeeding()) // don't split up the bar if paused or queued\n\t\tpct = Math.round(t.getUploadRatio() * 100 / seed_ratio_limit);\n\telse\n\t\tpct = 100;\n\n\tif (s === Torrent._StatusStopped)\n\t\textra = 'paused';\n\telse if (s === Torrent._StatusDownloadWait)\n\t\textra = 'leeching queued';\n\telse if (t.needsMetaData())\n\t\textra = 'magnet';\n\telse if (s === Torrent._StatusDownload)\n\t\textra = 'leeching';\n\telse if (s === Torrent._StatusSeedWait)\n\t\textra = 'seeding queued';\n\telse if (s === Torrent._StatusSeed)\n\t\textra = 'seeding';\n\telse\n\t\textra = '';\n\n\treturn {\n\t\tpercent: pct,\n\t\tcomplete: [ 'torrent_progress_bar', 'complete', extra ].join(' '),\n\t\tincomplete: [ 'torrent_progress_bar', 'incomplete', extra ].join(' ')\n\t};\n};\n\nTorrentRendererHelper.createProgressbar = function(classes)\n{\n\tvar complete, incomplete, progressbar;\n\n\tcomplete = document.createElement('div');\n\tcomplete.className = 'torrent_progress_bar complete';\n\n\tincomplete = document.createElement('div');\n\tincomplete.className = 'torrent_progress_bar incomplete';\n\n\tprogressbar = document.createElement('div');\n\tprogressbar.className = 'torrent_progress_bar_container ' + classes;\n\tprogressbar.appendChild(complete);\n\tprogressbar.appendChild(incomplete);\n\n\treturn { 'element': progressbar, 'complete': complete, 'incomplete': incomplete };\n};\n\nTorrentRendererHelper.renderProgressbar = function(controller, t, progressbar)\n{\n\tvar e, style, width, display,\n\t    info = TorrentRendererHelper.getProgressInfo(controller, t);\n\n\t// update the complete progressbar\n\te = progressbar.complete;\n\tstyle = e.style;\n\twidth = '' + info.percent + '%';\n\tdisplay = info.percent > 0 ? 'block' : 'none';\n\tif (style.width!==width || style.display!==display)\n\t\t$(e).css({ width: ''+info.percent+'%', display: display });\n\tif (e.className !== info.complete)\n\t\te.className = info.complete;\n\n\t// update the incomplete progressbar\n\te = progressbar.incomplete;\n\tdisplay = (info.percent < 100) ? 'block' : 'none';\n\tif (e.style.display !== display)\n\t\te.style.display = display;\n\tif (e.className !== info.incomplete)\n\t\te.className = info.incomplete;\n};\n\nTorrentRendererHelper.formatUL = function(t)\n{\n\treturn '上传速度：' + Transmission.fmt.speedBps(t.getUploadSpeed());\n};\n\nTorrentRendererHelper.formatDL = function(t)\n{\n\treturn '下载速度：' + Transmission.fmt.speedBps(t.getDownloadSpeed());\n};\n\n/****\n*****\n*****\n****/\n\nfunction TorrentRendererFull()\n{\n}\nTorrentRendererFull.prototype =\n{\n\tcreateRow: function()\n\t{\n\t\tvar root, name, peers, progressbar, details, image, button;\n\n\t\troot = document.createElement('li');\n\t\troot.className = 'torrent';\n\n\t\tname = document.createElement('div');\n\t\tname.className = 'torrent_name';\n\n\t\tpeers = document.createElement('div');\n\t\tpeers.className = 'torrent_peer_details';\n\n\t\tprogressbar = TorrentRendererHelper.createProgressbar('full');\n\n\t\tdetails = document.createElement('div');\n\t\tdetails.className = 'torrent_progress_details';\n\n\t\timage = document.createElement('div');\n\t\tbutton = document.createElement('a');\n\t\tbutton.appendChild(image);\n\n\t\troot.appendChild(name);\n\t\troot.appendChild(peers);\n\t\troot.appendChild(button);\n\t\troot.appendChild(progressbar.element);\n\t\troot.appendChild(details);\n\n\t\troot._name_container = name;\n\t\troot._peer_details_container = peers;\n\t\troot._progress_details_container = details;\n\t\troot._progressbar = progressbar;\n\t\troot._pause_resume_button_image = image;\n\t\troot._toggle_running_button = button;\n\n\t\treturn root;\n\t},\n\n\tgetPeerDetails: function(t)\n\t{\n\t\tvar err;\n\t\tif ((err = t.getErrorMessage()))\n\t\t\treturn err;\n\n\t\tif (t.isDownloading())\n\t\t\treturn [ '下载中',\n\t\t\t         t.getPeersSendingToUs(),\n\t\t\t         '/',\n\t\t\t         t.getPeersConnected(),\n\t\t\t         'peers',\n\t\t\t         '-',\n\t\t\t         TorrentRendererHelper.formatDL(t),\n\t\t\t         TorrentRendererHelper.formatUL(t) ].join(' ');\n\n\t\tif (t.isSeeding())\n\t\t\treturn [ '做种：',\n\t\t\t         t.getPeersGettingFromUs(),\n\t\t\t         '/',\n\t\t\t         t.getPeersConnected(),\n\t\t\t         'peers',\n\t\t\t         '-',\n\t\t\t         TorrentRendererHelper.formatUL(t) ].join(' ');\n\n\t\tif (t.isChecking())\n\t\t\treturn [ '验证本地数据中 (',\n\t\t\t         Transmission.fmt.percentString(100.0 * t.getRecheckProgress()),\n\t\t\t         '% tested)' ].join('');\n\n\t\treturn t.getStateString();\n\t},\n\n\tgetProgressDetails: function(controller, t)\n\t{\n\t\tif (t.needsMetaData()) {\n\t\t\tvar percent = 100 * t.getMetadataPercentComplete();\n\t\t\treturn [ \"Magnetized transfer - retrieving metadata (\",\n\t\t\t         Transmission.fmt.percentString(percent),\n\t\t\t         \"%)\" ].join('');\n\t\t}\n\n\t\tvar c,\n\t\t    sizeWhenDone = t.getSizeWhenDone(),\n\t\t    totalSize = t.getTotalSize(),\n\t\t    is_done = t.isDone() || t.isSeeding();\n\n\t\tif (is_done) {\n\t\t\tif (totalSize === sizeWhenDone) // seed: '698.05 MiB'\n\t\t\t\tc = [ Transmission.fmt.size(totalSize) ];\n\t\t\telse // partial seed: '127.21 MiB of 698.05 MiB (18.2%)'\n\t\t\t\tc = [ Transmission.fmt.size(sizeWhenDone),\n\t\t\t\t      ' of ',\n\t\t\t\t      Transmission.fmt.size(t.getTotalSize()),\n\t\t\t\t      ' (', t.getPercentDoneStr(), '%)' ];\n\t\t\t// append UL stats: ', uploaded 8.59 GiB (Ratio: 12.3)'\n\t\t\tc.push(', uploaded ',\n\t\t\t        Transmission.fmt.size(t.getUploadedEver()),\n\t\t\t        ' (Ratio ',\n\t\t\t        Transmission.fmt.ratioString(t.getUploadRatio()),\n\t\t\t        ')');\n\t\t} else { // not done yet\n\t\t\tc = [ Transmission.fmt.size(sizeWhenDone - t.getLeftUntilDone()),\n\t\t\t      ' of ', Transmission.fmt.size(sizeWhenDone),\n\t\t\t      ' (', t.getPercentDoneStr(), '%)' ];\n\t\t}\n\n\t\t// maybe append eta\n\t\tif (!t.isStopped() && (!is_done || t.seedRatioLimit(controller)>0)) {\n\t\t\tc.push(' - ');\n\t\t\tvar eta = t.getETA();\n\t\t\tif (eta < 0 || eta >= (999*60*60) /* arbitrary */)\n\t\t\t\tc.push('remaining time unknown');\n\t\t\telse\n\t\t\t\tc.push(Transmission.fmt.timeInterval(t.getETA()),\n\t\t\t\t        ' remaining');\n\t\t}\n\n\t\treturn c.join('');\n\t},\n\n\trender: function(controller, t, root)\n\t{\n\t\t// name\n\t\tsetTextContent(root._name_container, t.getName());\n\n\t\t// progressbar\n\t\tTorrentRendererHelper.renderProgressbar(controller, t, root._progressbar);\n\n\t\t// peer details\n\t\tvar has_error = t.getError() !== Torrent._ErrNone;\n\t\tvar e = root._peer_details_container;\n\t\t$(e).toggleClass('error',has_error);\n\t\tsetTextContent(e, this.getPeerDetails(t));\n\n\t\t// progress details\n\t\te = root._progress_details_container;\n\t\tsetTextContent(e, this.getProgressDetails(controller, t));\n\n\t\t// pause/resume button\n\t\tvar is_stopped = t.isStopped();\n\t\te = root._pause_resume_button_image;\n\t\te.alt = is_stopped ? 'Resume' : 'Pause';\n\t\te.className = is_stopped ? 'torrent_resume' : 'torrent_pause';\n\t}\n};\n\n/****\n*****\n*****\n****/\n\nfunction TorrentRendererCompact()\n{\n}\nTorrentRendererCompact.prototype =\n{\n\tcreateRow: function()\n\t{\n\t\tvar progressbar, details, name, root;\n\n\t\tprogressbar = TorrentRendererHelper.createProgressbar('compact');\n\n\t\tdetails = document.createElement('div');\n\t\tdetails.className = 'torrent_peer_details compact';\n\n\t\tname = document.createElement('div');\n\t\tname.className = 'torrent_name compact';\n\n\t\troot = document.createElement('li');\n\t\troot.appendChild(progressbar.element);\n\t\troot.appendChild(details);\n\t\troot.appendChild(name);\n\t\troot.className = 'torrent compact';\n\t\troot._progressbar = progressbar;\n\t\troot._details_container = details;\n\t\troot._name_container = name;\n\t\treturn root;\n\t},\n\n\tgetPeerDetails: function(t)\n\t{\n\t\tvar c;\n\t\tif ((c = t.getErrorMessage()))\n\t\t\treturn c;\n\t\tif (t.isDownloading()) {\n\t\t\tvar have_dn = t.getDownloadSpeed() > 0,\n\t\t\t    have_up = t.getUploadSpeed() > 0;\n\t\t\tif (!have_up && !have_dn)\n\t\t\t\treturn 'Idle';\n\t\t\tvar s = '';\n\t\t\tif (have_dn)\n\t\t\t\ts += TorrentRendererHelper.formatDL(t);\n\t\t\tif (have_dn && have_up)\n\t\t\t\ts += ' '\n\t\t\tif (have_up)\n\t\t\t\ts += TorrentRendererHelper.formatUL(t);\n\t\t\treturn s;\n\t\t}\n\t\tif (t.isSeeding())\n\t\t\treturn [ 'Ratio: ',\n\t\t\t         Transmission.fmt.ratioString(t.getUploadRatio()),\n\t\t\t         ', ',\n\t\t\t         TorrentRendererHelper.formatUL(t) ].join('');\n\t\treturn t.getStateString();\n\t},\n\n\trender: function(controller, t, root)\n\t{\n\t\t// name\n\t\tvar is_stopped = t.isStopped();\n\t\tvar e = root._name_container;\n\t\t$(e).toggleClass('paused', is_stopped);\n\t\tsetTextContent(e, t.getName());\n\n\t\t// peer details\n\t\tvar has_error = t.getError() !== Torrent._ErrNone;\n\t\te = root._details_container;\n\t\t$(e).toggleClass('error', has_error);\n\t\tsetTextContent(e, this.getPeerDetails(t));\n\n\t\t// progressbar\n\t\tTorrentRendererHelper.renderProgressbar(controller, t, root._progressbar);\n\t}\n};\n\n/****\n*****\n*****\n****/\n\nfunction TorrentRow(view, controller, torrent)\n{\n\tthis.initialize(view, controller, torrent);\n}\nTorrentRow.prototype =\n{\n\tinitialize: function(view, controller, torrent) {\n\t\tvar row = this;\n\t\tthis._view = view;\n\t\tthis._torrent = torrent;\n\t\tthis._element = view.createRow();\n\t\tthis.render(controller);\n\t\t$(this._torrent).bind('dataChanged.torrentRowListener',function(){row.render(controller);});\n\n\t},\n\tgetElement: function() {\n\t\treturn this._element;\n\t},\n\trender: function(controller) {\n\t\tvar tor = this.getTorrent();\n\t\tif (tor)\n\t\t\tthis._view.render(controller, tor, this.getElement());\n\t},\n\tisSelected: function() {\n\t\treturn this.getElement().className.indexOf('selected') !== -1;\n\t},\n\tsetSelected: function(flag) {\n\t\t$(this.getElement()).toggleClass('selected', flag);\n\t},\n\n\tgetToggleRunningButton: function() {\n\t\treturn this.getElement()._toggle_running_button;\n\t},\n\n\tgetTorrent: function() {\n\t\treturn this._torrent;\n\t},\n\tgetTorrentId: function() {\n\t\treturn this.getTorrent().getId();\n\t}\n};\n"],"sourceRoot":"/source/"}