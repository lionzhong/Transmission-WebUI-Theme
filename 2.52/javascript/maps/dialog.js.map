{"version":3,"sources":["dialog.js"],"names":["Dialog","this","initialize","prototype","_container","$","_heading","_message","_cancel_button","_confirm_button","_callback_function","_callback_data","bind","dialog","onCancelClicked","onConfirmClicked","hideDialog","removeClass","hide","transmission","hideMobileAddressbar","updateButtonStates","event","data","eval","confirm","dialog_heading","dialog_message","confirm_button_label","callback_function","callback_data","cancel_button_label","isMobileDevice","setTextContent","show","addClass","alert","css"],"mappings":"AAOA,QAASA,UACRC,KAAKC,aAGNF,OAAOG,WAKND,WAAY,WAKXD,KAAKG,WAAaC,EAAE,qBACpBJ,KAAKK,SAAWD,EAAE,mBAClBJ,KAAKM,SAAWF,EAAE,mBAClBJ,KAAKO,eAAiBH,EAAE,yBACxBJ,KAAKQ,gBAAkBJ,EAAE,0BACzBJ,KAAKS,mBAAqB,GAC1BT,KAAKU,eAAiB,KAGtBV,KAAKO,eAAeI,KAAK,SAAUC,OAAQZ,MAAOA,KAAKa,iBACvDb,KAAKQ,gBAAgBG,KAAK,SAAUC,OAAQZ,MAAOA,KAAKc,mBAazDC,WAAY,WAEXX,EAAE,uBAAuBY,YAAY,kBACrChB,KAAKG,WAAWc,OAChBC,aAAaC,uBACbD,aAAaE,sBAGdP,gBAAiB,SAASQ,GAEzBA,EAAMC,KAAKV,OAAOG,cAGnBD,iBAAkB,SAASO,OAE1B,GAAIT,QAASS,MAAMC,KAAKV,MACxBW,MAAKX,OAAOH,mBAAqB,2BACjCG,OAAOG,cAYRS,QAAS,SAASC,EAAgBC,EAAgBC,EAChCC,EAAmBC,EAAeC,GAE9CC,gBACJ3B,EAAE,qBAAqBa,OACxBe,eAAehC,KAAKK,SAAS,GAAIoB,GACjCO,eAAehC,KAAKM,SAAS,GAAIoB,GACjCM,eAAehC,KAAKO,eAAe,GAAIuB,GAAuB,MAC9DE,eAAehC,KAAKQ,gBAAgB,GAAImB,GACxC3B,KAAKQ,gBAAgByB,OACrBjC,KAAKS,mBAAqBmB,EAC1B5B,KAAKU,eAAiBmB,EACtBzB,EAAE,QAAQ8B,SAAS,kBACnBlC,KAAKG,WAAW8B,OAChBf,aAAaE,qBACTW,gBACHb,aAAaC,wBAMfgB,MAAO,SAASV,EAAgBC,EAAgBI,GAC1CC,gBACJ3B,EAAE,qBAAqBa,OACxBe,eAAehC,KAAKK,SAAS,GAAIoB,GACjCO,eAAehC,KAAKM,SAAS,GAAIoB,GAEjC1B,KAAKQ,gBAAgB4B,IAAI,UAAW,QACpCJ,eAAehC,KAAKO,eAAe,GAAIuB,GAEvC1B,EAAE,qBAAqBa,OACvBb,EAAE,QAAQ8B,SAAS,kBACnBhB,aAAaE,qBACTW,gBACHb,aAAaC,uBACdnB,KAAKG,WAAW8B","file":"dialog.js","sourcesContent":["/**\n * Copyright © Dave Perrett and Malcolm Jarvis\n *\n * This file is licensed under the GPLv2.\n * http://www.gnu.org/licenses/old-licenses/gpl-2.0.html\n */\n\nfunction Dialog(){\n\tthis.initialize();\n}\n\nDialog.prototype = {\n\n\t/*\n\t * Constructor\n\t */\n\tinitialize: function() {\n\t\t\n\t\t/*\n\t\t * Private Interface Variables\n\t\t */\n\t\tthis._container = $('#dialog_container');\n\t\tthis._heading = $('#dialog_heading');\n\t\tthis._message = $('#dialog_message');\n\t\tthis._cancel_button = $('#dialog_cancel_button');\n\t\tthis._confirm_button = $('#dialog_confirm_button');\n\t\tthis._callback_function = '';\n\t\tthis._callback_data = null;\n\t\t\n\t\t// Observe the buttons\n\t\tthis._cancel_button.bind('click', {dialog: this}, this.onCancelClicked);\n\t\tthis._confirm_button.bind('click', {dialog: this}, this.onConfirmClicked);\n\t},\n\n\n\n\n\n\t/*--------------------------------------------\n\t *\n\t *  E V E N T   F U N C T I O N S\n\t *\n\t *--------------------------------------------*/\n\n\thideDialog: function()\n\t{\n\t\t$('body.dialog_showing').removeClass('dialog_showing');\n\t\tthis._container.hide();\n\t\ttransmission.hideMobileAddressbar();\n\t\ttransmission.updateButtonStates();\n\t},\n\n\tonCancelClicked: function(event)\n\t{\n\t\tevent.data.dialog.hideDialog();\n\t},\n\n\tonConfirmClicked: function(event)\n\t{\n\t\tvar dialog = event.data.dialog;\n\t\teval(dialog._callback_function + \"(dialog._callback_data)\");\n\t\tdialog.hideDialog();\n\t},\n\n\t/*--------------------------------------------\n\t *\n\t *  I N T E R F A C E   F U N C T I O N S\n\t *\n\t *--------------------------------------------*/\n\n\t/*\n\t * Display a confirm dialog\n\t */\n\tconfirm: function(dialog_heading, dialog_message, confirm_button_label,\n\t                  callback_function, callback_data, cancel_button_label)\n\t{\n\t\tif (!isMobileDevice)\n\t\t\t$('.dialog_container').hide();\n\t\tsetTextContent(this._heading[0], dialog_heading);\n\t\tsetTextContent(this._message[0], dialog_message);\n\t\tsetTextContent(this._cancel_button[0], cancel_button_label || '取消');\n\t\tsetTextContent(this._confirm_button[0], confirm_button_label);\n\t\tthis._confirm_button.show();\n\t\tthis._callback_function = callback_function;\n\t\tthis._callback_data = callback_data;\n\t\t$('body').addClass('dialog_showing');\n\t\tthis._container.show();\n\t\ttransmission.updateButtonStates();\n\t\tif (isMobileDevice)\n\t\t\ttransmission.hideMobileAddressbar();\n\t},\n\n\t/*\n\t * Display an alert dialog\n\t */\n\talert: function(dialog_heading, dialog_message, cancel_button_label) {\n\t\tif (!isMobileDevice)\n\t\t\t$('.dialog_container').hide();\n\t\tsetTextContent(this._heading[0], dialog_heading);\n\t\tsetTextContent(this._message[0], dialog_message);\n\t\t// jquery::hide() doesn't work here in Safari for some odd reason\n\t\tthis._confirm_button.css('display', 'none');\n\t\tsetTextContent(this._cancel_button[0], cancel_button_label);\n\t\t// Just in case\n\t\t$('#upload_container').hide();\n\t\t$('body').addClass('dialog_showing');\n\t\ttransmission.updateButtonStates();\n\t\tif (isMobileDevice)\n\t\t\ttransmission.hideMobileAddressbar();\n\t\tthis._container.show();\n\t}\n\t\n\n}\n"],"sourceRoot":"/source/"}